# Шаблон ТЗ по проекту


## Общие сведения

1. **Цель проекта**  
  Создание умного зеркала с интегрированной LED-матрицей и модулем голосового управления для отображения пользовательской информации (часы, календарь, погода, уведомления, медиаданные) и обеспечения взаимодействия с системой через голосовые команды и реализации голосового отклика на запросы пользователя.
2. **Команда исполнителей**
* Черемисова Мария - тупая блондинка
* Трикашный Михаил - экстремал
* Покалюхин Илья - по фольксвагенам
* Силаев Захар - R.I.P. 2025
* Чусовлянов Максим - тимлид (спит)
## Технические требования

1. **Требования к функциональным характеристикам**

    **1.1. Система голосового управления**
    - Точность распознавания русской речи в тихой обстановке (уровень шума < 40 дБ): ≥ 90%
    - Точность распознавания в условиях бытового шума (уровень шума 50-60 дБ): ≥ 80%
    - Максимальная задержка между окончанием речи и началом обработки: ≤ 3 секунды
    - Дальность работы микрофона: до 3 метров
    - Время выполнения локальных команд: ≤ 1 секунда
    - Время обработки запросов к LLM с озвучкой: ≤ 15 секунд в 80% случаев
    - Поддерживаемый набор базовых команд: не менее 20 (управление плеером, запрос погоды, времени, календаря)

    **1.2. Получение и отображение данных**
    - Погода:
        - Автоматическое обновление: каждые 30 минут
        - Отображаемые параметры: температура, погодные условия, скорость ветра, влажность
        - Время отклика API: ≤ 3 секунды
    - Время и календарь:
        - Синхронизация по NTP: каждые 24 часа
        - Отображение: время, дата

    **1.3. Управление медиаплеером**
    - Поддерживаемые форматы: MP3, AAC, FLAC
    - Источники: локальная библиотека, потоковое вещание
    - Голосовые команды: "включи музыку", "пауза", "следующий трек", "громче на 10%" и т. д.

    **1.4. Визуализация и интерфейс**
    - LED-матрица:
        - Частота обновления статики: ≥ 30 FPS
        - Частота анимации: ≥ 24 FPS
        - Четкость текста: читаемость с 1.5 метров
    - Индикация состояний:
        - Реакция на ключевое слово: ≤ 0.5 секунды
        - Индикация обработки: анимация процесса
        - Индикация ошибки: уникальный значок/цвет

    **1.5. Эмоциональная и информационная поддержка**
    - Реализация через интеграцию с LLM (Большой Языковой Моделью)
    - Обработка эмоционально окрашенных запросов пользователя
    - Генерация контекстно-зависимых ответов
    - Преобразование текстового ответа в речь (TTS) и озвучка

2. Требования к надежности
    * Гарантированная доступность основных функций (голосовые команды, погода, управление музыкой). Общая доступность: ≥ 99.5% в месяц. Пик недоступности за инцидент: ≤ 15 минут. Макс. суммарный простой в месяц: ≤ 7.2 часов.
    * Гарантируется доступность функций взаимодействия с языковой моделью. Общая доступность ≥ 95.8%. Пик недоступности за инцидент: ≤ 60 минут.  Макс. суммарный простой в месяц: ≤ 30 часов.
    * Устойчивость к отказам внешних API

3. Условия эксплуатации
    - Устройство предназначено для эксплуатации в помещениях с температурой от +10 °C до +35 °C и относительной влажностью не более 80% при отсутствии конденсации влаги.  
    - Допускается работа только при наличии стабильного электропитания 220 В, с использованием блока питания, соответствующего техническим характеристикам.  
    - Зеркало должно устанавливаться на вертикальную поверхность или в стационарное крепление, исключающее механические воздействия и вибрацию.  
    - Не допускается эксплуатация в условиях повышенной запыленности, воздействия прямых солнечных лучей, агрессивных химических сред и высокой влажности.  

4. Требования к составу и параметрам технических средств
    - Дисплей (фотоматричная панель) 192 × 192мм, разрешение 64 × 64 пикселя.  
    - Полупрозрачное зеркало с коэффициентом светопропускания 12%.  
    - Встроенный микрофон.  
    - Акустическая система (динамики мощностью 8 Вт).  
    - Контроллерная плата с тактовой частотой не менее 1,5 ГГц, оперативной памятью от 2 ГБ, встроенным модулем Wi-Fi.
    - Блок питания с выходным напряжением 5 В и силой тока не менее 3 А.  

5. **Требования к информационной и программной совместимости**
    - **Требования к информационной и программной совместимости**
        - Совместимость с операционной системой Ubuntu 22.04 LTS
        - Поддержка стандартных интерфейсов передачи данных: Wi-Fi 2.4 ГГц. 
        - Возможность интеграции с внешними облачными сервисами (погодные API, LLM).
        - Использование открытых протоколов и библиотек (HTTP/HTTPS, WebSocket, MQTT) для обмена данными.
        - Допускается использование более новых версий библиотек и систем при условии полной обратной совместимости.
    - **Программная среда Raspberry Pi 4 (клиентская часть)**

        - ОС: Ubuntu Server 22.04 LTS (arm64)
        - Язык программирования: Python 3.11
        - ROS 2 (Robot Operating System): Humble Hawksbill
        - **Библиотеки Python:**
            - NumPy 1.26  
            - Pandas 2.1  
            - Requests 2.31  
            - OpenCV 4.8  
            - Pillow 10.0  
            - Matplotlib 3.8 
            - rpi_ws281x 5.0 (или совместимая библиотека для управления светодиодной матрицей 64×64)  
            - paho-mqtt 1.6
            - websockets 11.0  
    - **Серверная часть (Spring Boot)**
        - ОС сервера: Ubuntu Server 22.04 LTS
        - Java: OpenJDK 17 (LTS)
        - Spring Boot: 3.1.x
        - СУБД: PostgreSQL 15
        - **Библиотеки/зависимости:**  
            - Spring Security (для авторизации и аутентификации)  
            - Jackson 2.15 (JSON-сериализация)  
            - Lombok 1.18  
            - Hibernate ORM 6.3  
    - **Совместимость и интеграция**
        - Протокол обмена данными между Raspberry Pi и сервером: **REST (HTTP/HTTPS)** и **WebSocket** для потоковых данных.  
        - Для LLM-интеграции: поддержка REST API.
  (поддержка **Docker 24.x** для контейнеризации серверных компонентов).  

6. Требования к транспортированию и хранению
    - Транспортировка допускается всеми видами крытого транспорта при температуре от −10 °C до +30 °C и относительной влажности до 95%.  
    - Хранение должно осуществляться в закрытых помещениях при температуре от 0 °C до +30 °C и относительной влажности до 80%, без воздействия прямых солнечных лучей.  
    - Устройство должно быть упаковано в транспортную тару, защищающую от механических повреждений, ударов и вибраций.  
  
7. Анализ конкурентов

| Аналог | Ключевые функции | Отличия нашего проекта |
|--------|------------------|------------------------|
| **HiMirror/HiSkin** | Анализ кожи, виртуальный макияж, ЖК-дисплей | **Наш проект:** Универсальный ассистент, LED-матрица, фокус на информационный хаб |
| **Cara by Tonal** | Фитнес-тренировки, интерактивные занятия | Универсальный повседневный ассистент, открытая архитектура |
| **DIY проекты на базе зеркала и монитора** | Максимальная кастомизация, низкая стоимость, платформы типа MagicMirror² | **Наш проект:** Документированное решение с конкретным стеком технологий, LED-матрица вместо ЖК-экрана |

**Вывод:** Прямых аналогов, совмещающих **умное зеркало на LED-матрице** с **голосовым управлением** и **серверной архитектурой**, на рынке нет. Проект занимает нишу кастомизируемого хаба с уникальным дисплеем и мощной backend-составляющей.

## Требования к документации
**Состав программной документации:**  
В состав документации входит «Руководство пользователя», предназначенное для конечных пользователей системы, а так же "Внутренняя документация" для системного программиста, которая описывает архитектуру, внутренние модули, алгоритмы работы, интерфейсы между компонентами и инструкции по сопровождению/модификации кода.

**Требования к руководству пользователя:**
* Руководство должно содержать описание назначения умного зеркала, его основных функций и возможностей.
* Должен быть приведён порядок установки, включения и первичной настройки устройства.
* Необходимо описать способы взаимодействия с зеркалом:  
  * использование голосовых команд,
  * просмотр информации на LCD-дисплее,
  * получение голосового отклика системы.
* В документе должны быть приведены инструкции по работе с основными сценариями (отображение времени, календаря, погоды, уведомлений и др.).
* Руководство должно содержать рекомендации по безопасной эксплуатации устройства.
* Обязательны разделы с возможными неисправностями и способами их устранения.
* Информация должна быть изложена понятным языком, допускается наличие иллюстраций интерфейса.

**Требования к внутренней документации:**
* Документация для системного программиста должна описывать архитектуру программной системы, включая основные модули и их взаимодействие.
* Документация должна содержать описание структуры исходного кода, включая назначение каталогов, модулей и ключевых функций.
* Документация должна включать перечень используемых библиотек, зависимостей и их версий.
* Документация должна содержать описание реализации голосового управления и LCD-дисплея.
* Документация должна включать описание интерфейсов взаимодействия с внешними сервисами.
* Документация должна содержать инструкции по сборке и установке зеркала.
* Документация должна содержать инструкции по развёртке сервера.
* Документация должна содержать перечень возможных ошибок и рекомендации по их диагностике и устранению.
   
## Технико-экономические показатели

**Смета расходов на единичное изделие:** *(будет меняться по ходу разработки)*
| Компонент           | Цена (₽) | 
|---------------------|----------|
| Зеркало             | 700      | 
| Доставка зеркала    | 2000     |
| Матрица (дисплей)   | 2989     | 
| Микрофон            | 270      | 
| Динамики            | 540      |
| Raspberry Pi 4 (4GB)| 8500     | 
| Wi-Fi модуль        | 600      | 

**Итого (штучное производство):** ≈ **15 599 ₽**

---

**Смета расходов на единичное изделие при серийном производстве:**
| Компонент           | Цена (₽) |
|---------------------|----------|
| Зеркало             | ~800     |
| Доставка зеркала    | ~200     |
| Матрица (дисплей)   | ~1500    |
| Микрофон            | ~120     |
| Динамики            | ~300     |
| Контроллерная плата (вместо Raspberry Pi 4, с Wi-Fi) | ~3500 |

**Итого (серийное производство): ≈ 6 400 ₽**

---

### Вывод
При переходе от единичной сборки к серийному производству себестоимость снижается почти в **2,5 раза** — с ~15 600 ₽ до ~6 400 ₽.  
Основное сокращение расходов достигается за счёт:  
- закупки матриц и зеркал партиями у производителя (−40–50% к цене),  
- отказа от Raspberry Pi 4 в пользу специализированной платы (−50–60% затрат на вычислительный блок),  
- снижения стоимости доставки и мелких модулей при оптовых партиях.  


## Cтадии и этапы разработки

Разработка проекта осуществляется поэтапно. Каждый этап завершается оформлением и сдачей соответствующих документов, их согласованием и утверждением.

### Стадии разработки

1. **Подготовительная стадия**
   - Формирование требований к системе (сбор и анализ информации, согласование технических требований).
   - Разработка и утверждение технического задания (ТЗ).

2. **Эскизное проектирование**
   - Разработка эскизных решений по аппаратной и программной архитектуре.
   - Подбор компонентов (матрица, микрофон, динамики, вычислительный модуль).
   - Составление предварительной схемы взаимодействия модулей.
   - Согласование эскизного проекта.

3. **Техническое проектирование**
   - Разработка детализированной схемы системы (аппаратная и программная части).
   - Определение интерфейсов взаимодействия между компонентами.
   - Проектирование прототипа корпуса и размещения модулей.
   - Разработка технической документации (схемы, спецификации, инструкции).
   - Утверждение технического проекта.

4. **Рабочее проектирование**
   - Разработка программного обеспечения:
      * модуль голосового управления,
      * интеграция с LLM,
      * модуль отображения данных (погода, календарь, время),
      * мультимедийный проигрыватель,
      * система визуальной индикации состояний.
   - Создание прототипа устройства (сборка и настройка).
   - Проведение отладки и тестирования.
   - Подготовка рабочей документации.

5. **Внедрение и испытания**
   - Проведение предварительных испытаний прототипа.
   - Испытания функциональных возможностей устройства.
   - Проведение приемо-сдаточных испытаний.
   - Корректировка документации по результатам испытаний.

---

### Этапы работ и распределение исполнителей

| Этап | Содержание работ | Ответственный               |
|------|-----------------|-----------------------------|
| Подготовительная стадия | Сбор данных, согласование, утверждение ТЗ | Чусовлянов М.               |
| Эскизное проектирование | Архитектура системы, выбор компонентов | Трикашный М., Силаев З.     |
| Техническое проектирование | Схемы, спецификации, документация | Черемисова М., Покалюхин И. |
| Рабочее проектирование | ПО, сборка прототипа, интеграция | Вся команда                 |
| Внедрение и испытания | Функциональные, приемо-сдаточные | Вся команда                 |

---

## Порядок контроля и приемки

| №  | Требование | Виды испытаний | Приёмочные критерии |
|----|-------------|----------------|----------------------|
| 1.1 | Голосовые команды (распознавание речи, выполнение функций) | Функциональные тесты; Тесты на точность распознавания (шум, акценты);  | ≥ 80% команд корректно распознаются; Время обработки ≤ 5 сек |
| 1.2 | Получение и отображение данных о погоде | Функциональные тесты UI | Отображение соответствует макету; При ошибке API выводится уведомление |
| 1.3 | Управление музыкальным проигрывателем | Функциональные тесты команд; Тесты совместимости; UX-тесты | ≥ 80% команд выполняются с первого раза; Время реакции ≤ 5 сек |
| 1.4 | Доступ к LLM через голос | Функциональные тесты; Тесты устойчивости | Ответ в 80% случаев ≤ 20 сек; Ошибки API обрабатываются корректно |
| 1.5 | Эмоциональная и информационная поддержка | UX/юзабилити-тесты; Тесты сценариев | ≥ 70% запросов классифицируются как «поддерживающие» |
| 1.6 | Отражение пользователя и окружения | - | - |
| 1.7 | Визуальные состояния системы (idle, processing, error) | Функциональные тесты; UX-тесты | Состояния различимы; Отображение ≤ 1 с от смены статуса |
| 1.8 | Визуализация при проигрывании музыки | Функциональные тесты;  | Частота ≥ 24 FPS;|
| 2.1 | Доступность ≥ 99.5% (голос, погода, музыка) | Тесты отказоустойчивости; Мониторинг доступности | Аптайм ≥ 99.5%; Пик недоступности ≤ 15 мин; Макс. простой ≤ 7.2 ч/мес |
| 2.2 | Доступность LLM ≥ 95.8% | Мониторинг; Тесты отказа API | Аптайм ≥ 95.8%; Пик недоступности ≤ 60 мин; Макс. простой ≤ 30 ч/мес |
| 2.3 | Устойчивость к отказам внешних API | Интеграционные тесты с заглушками| Система не падает при сбое API; Сообщение об ошибке выводится; Автовосстановление после сбоя |

## Ссылки на источники

1. ГОСТ 19.201-78 Техническое задание. Требования к содержанию и оформлению
